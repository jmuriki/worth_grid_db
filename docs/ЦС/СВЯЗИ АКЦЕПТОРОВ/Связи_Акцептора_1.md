
# Повреждение и удовлетворение Акцептора


***

<div>
	<h2 style="margin: 0;">Исходный код Python</h2>
	<p style="margin: 0;">Интерфейс</p>
</div>
<br>

<div>
	<h3 style="margin: 0;">Читатель кода</h3>
	<p style="margin: 0;">Роль Пользователя</p>
</div>
<br>

<div>
	<h4 style="margin: 0;">Бегло проследить поток исполнения программы</h4>
	<p style="margin: 0;">Ключевая Функция</p>
</div>
<br>

<div>
	<h5 style="margin: 0;">В один проход ✅</h5>
	<p style="margin: 0;">Типичная История</p>
</div>
<br>

<div>
	<h6 style="margin: 0;">Прочитал строку кода до конца</h6>
	<p style="margin: 0;">Акцептор Успеха</p>
</div>
<br>

***

**Пример  из Анти-паттерна [CamelCase в переменных и функциях](../../../ЦС/АНТИ-ПАТТЕРНЫ/CamelCase в переменных и функциях)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
class Postcard(BaseModel):
    holidayId: str
    name_ru: str
    body: Union[str, List[str]]
```
**Хорошо:**
```python
class Postcard(BaseModel):
    holiday_id: str = Field(alias='holidayId')
    name_ru: str
    body: Union[str, List[str]]
```

***

**Пример 1 из Анти-паттерна [Hardcoding секретов](../../../ЦС/АНТИ-ПАТТЕРНЫ/Hardcoding секретов)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
def main():
    POSTGRES_DSN = 'postgres://postgres:postgres@postgres:5432/postgres'
```
**Хорошо:**
```python
from environs import Env


def main():
    env = Env()
    env.read_env()

    POSTGRES_DSN = env.str('POSTGRES_DSN')
```
**Хорошо:**
```python
import os

from dotenv import load_dotenv


def main():
    load_dotenv()

    POSTGRES_DSN = os.getenv('POSTGRES_DSN')
```

***

**Пример 2 из Анти-паттерна [Hardcoding секретов](../../../ЦС/АНТИ-ПАТТЕРНЫ/Hardcoding секретов)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
def main():
    product_url = 'http://localhost:8000/api/products'
    cart_url = 'http://localhost:8000/api/carts'
```
**Хорошо:**
```python
from environs import Env
from urllib.parse import urljoin


def main():
    env = Env()
    env.read_env()

    base_url = env.str('SERVICE_URL')
    product_url = urljoin(base_url, 'api/products')
    cart_url = urljoin(base_url, 'api/carts')
```

***

**Пример 3 из Анти-паттерна [Hardcoding секретов](../../../ЦС/АНТИ-ПАТТЕРНЫ/Hardcoding секретов)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
def main():
    SECRET_KEY = 'cdl3v0giob0_q!or$c2-7kvrui69pg^f$y'
```
**Хорошо:**
```python
from environs import Env


def main():
    env = Env()
    env.read_env()

    SECRET_KEY = env.str('SECRET_KEY')
```
**Хорошо:**
```python
import os

from dotenv import load_dotenv


def main():
    load_dotenv()

    SECRET_KEY = os.getenv('SECRET_KEY')
```

***

**Пример 4 из Анти-паттерна [Hardcoding секретов](../../../ЦС/АНТИ-ПАТТЕРНЫ/Hardcoding секретов)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
def main():
    ALLOWED_HOSTS = ['127.0.0.1', 'localhost']
```
**Хорошо:**
```python
from environs import Env


def main():
    env = Env()
    env.read_env()

    ALLOWED_HOSTS = env.list('ALLOWED_HOSTS', ['127.0.0.1', 'localhost'])
```

***

**Пример 5 из Анти-паттерна [Hardcoding секретов](../../../ЦС/АНТИ-ПАТТЕРНЫ/Hardcoding секретов)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
def main():
    DEBUG = False
```
**Плохо:**
```python
def main():
    DEBUG = True
```
**Хорошо:**
```python
from environs import Env


def main():
    env = Env()
    env.read_env()

    DEBUG = env.bool(DEBUG, False)
```

***

**Пример 1 из Анти-паттерна [`is` и подобные в начале функции](../../../ЦС/АНТИ-ПАТТЕРНЫ/`is` и подобные в начале функции)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
def is_draft_deal(self, obj):
    ...
```
**Хорошо:**
```python
def check_deal_is_draft(self, obj):
    ...
```

***

**Пример 2 из Анти-паттерна [`is` и подобные в начале функции](../../../ЦС/АНТИ-ПАТТЕРНЫ/`is` и подобные в начале функции)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Исключение:**
```python
def has_add_permission(self, request):
    ...

def has_change_permission(self, request):
    ...
```

***

**Пример  из Анти-паттерна [except Exception](../../../ЦС/АНТИ-ПАТТЕРНЫ/except Exception)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
try:
    do_something()
except Exception:
    logging.error('Произошла ошибка')
```
**Хорошо:**
```python
try:
    do_something()
except FileNotFoundError:
    logging.error('Файл не найден!')
except PermissionError:
    logging.error('Нет прав доступа к файлу!')
```
**Допустимо:**
```python
try:
    do_something()
except FileNotFoundError:
    logging.error('Файл не найден!')
except PermissionError:
    logging.error('Нет прав доступа к файлу!')
except Exception as e:
    logging.error(f'Произошла ошибка: {e}.')
```

***

**Пример  из Анти-паттерна [lower_case в .env](../../../ЦС/АНТИ-ПАТТЕРНЫ/lower_case в .env)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
from environs import Env

def main():
    env = Env()
    env.read_env()
    tg_chat_id = env.str('tg_chat_id')
```
**Хорошо:**
```python
from environs import Env

def main():
    env = Env()
    env.read_env()
    tg_chat_id = env.str('TG_CHAT_ID')
```

***

**Пример  из Анти-паттерна [null=True и blank=True со строковыми полями](../../../ЦС/АНТИ-ПАТТЕРНЫ/null=True и blank=True со строковыми полями)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
from django.db import models


class Article(models.Model):
    title = models.CharField(max_length=200)
    summary = models.TextField(null=True, blank=True, default="")
    url = models.URLField(null=True, blank=True, default="")

    def __str__(self):
        return self.title
```
**Хорошо:**
```python
from django.db import models


class Article(models.Model):
    title = models.CharField(max_length=200)
    summary = models.TextField(blank=True, default="")
    url = models.URLField(blank=True, default="")

    def __str__(self):
        return self.title
```

***

**Пример 1 из Анти-паттерна [null=True или blank=True вместе с default](../../../ЦС/АНТИ-ПАТТЕРНЫ/null=True или blank=True вместе с default)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
from django.db import models


class Product(models.Model):
    name = models.CharField(max_length=100, null=True, blank=True, default="Unknown")
```
**Хорошо:**
```python
from django.db import models


class Product(models.Model):
    name = models.CharField(max_length=100, blank=True, default="Unknown")
```

***

**Пример  из Анти-паттерна [try-except вместо suppress](../../../ЦС/АНТИ-ПАТТЕРНЫ/try-except вместо suppress)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
try:
    do_something()
except NotImportantError:
    pass
```
**Плохо:**
```python
try:
    do_something()
except NotImportantError:
    continue
```
**Хорошо:**
```python
from contextlib import suppress

with suppress(NotImportantError):
    do_something()
```

***

**Пример  из Анти-паттерна [Артефакты в коде](../../../ЦС/АНТИ-ПАТТЕРНЫ/Артефакты в коде)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
from math import pi


def calculate_circle_area(radius):
    circle_area = pi * radius ** 2
    return circle_area


# Данная функция не используется
def calculate_square_area(side):
    return side * side


def main():
    radius = ...
    circle_area = calculate_circle_area(radius)
```
**Плохо:**
```python
from math import pi


def calculate_circle_area(radius):
    circle_area = pi * radius ** 2
    return circle_area


# def calculate_square_area(side):
#    return side * side


def main():
    radius = ...
    circle_area = calculate_circle_area(radius)
```
**Хорошо:**
```python
from math import pi


def calculate_circle_area(radius):
    circle_area = pi * radius ** 2
    return circle_area


def main():
    radius = ...
    circle_area = calculate_circle_area(radius)
```

***

**Пример 1 из Анти-паттерна [Бесполезная функция](../../../ЦС/АНТИ-ПАТТЕРНЫ/Бесполезная функция)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
from environs import Env


def get_env():
    env = Env()
    return env.read_env()


def main():
    env = get_env()
    ...
```
**Хорошо:**
```python
from environs import Env


def main():
    env = Env()
    env.read_env()
    ...
```

***

**Пример 2 из Анти-паттерна [Бесполезная функция](../../../ЦС/АНТИ-ПАТТЕРНЫ/Бесполезная функция)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
import os


def get_filenames(directory):
    filenames = os.listdir(directory)
    return filenames


def main():
    ...
    filenames = get_filenames(directory)
    ...
```
**Хорошо:**
```python
import os


def main():
    ...
    filenames = os.listdir(directory)
    ...
```

***

**Пример 3 из Анти-паттерна [Бесполезная функция](../../../ЦС/АНТИ-ПАТТЕРНЫ/Бесполезная функция)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
def fetch_something(callback, url, error_message):
    result = callback(url)
    if not result:
        raise SomeError(error_message)
    return result


def main():
    try:
        payload = fetch_something(get_some_payload, some_url, "Что-то пошло не так.")
    except SomeError as err:
        logger.error(err)
```
**Хорошо:**
```python
def main():
    payload = get_some_payload(some_url)
    if not payload:
        logger.warning("Что-то пошло не так.")
```

***

**Пример 4 из Анти-паттерна [Бесполезная функция](../../../ЦС/АНТИ-ПАТТЕРНЫ/Бесполезная функция)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
import requests


def send_request(url):
    response = requests.get(url)
    response.raise_for_status()
    return response


def main():
    ...
    try:
        response = send_request(url)
    except requests.exceptions.HTTPError as err:
        ...
```
**Хорошо:**
```python
import requests


def main():
    ...
    try:
        response = requests.get(url)
        response.raise_for_status()
    except requests.exceptions.HTTPError as err:
        ...
```

***

**Пример  из Анти-паттерна [Бесполезные индексы](../../../ЦС/АНТИ-ПАТТЕРНЫ/Бесполезные индексы)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
names = ['Alice', 'Bob', 'Charlie']

for num in range(len(names)):
    greeting = f'Привет, {names[num]}!'
    ...
```
**Хорошо:**
```python
names = ['Alice', 'Bob', 'Charlie']

for name in names:
    greeting = f'Привет, {name}!'
    ...
```

***

**Пример  из Анти-паттерна [Бесполезные комментарии](../../../ЦС/АНТИ-ПАТТЕРНЫ/Бесполезные комментарии)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
def show_active_passcards(request):
    active_passcards = Passcard.objects.filter(is_active=True)  # запрос для получения активных пропусков
    context = {
        'active_passcards': active_passcards,  # активные пропуска
    }
    return render(request, 'active_passcards.html', context)
```
**Хорошо:**
```python
def show_active_passcards(request):
    active_passcards = Passcard.objects.filter(is_active=True)
    context = {
        'active_passcards': active_passcards,
    }
    return render(request, 'active_passcards.html', context)
```

***

**Пример  из Анти-паттерна [Беспорядок в импортах](../../../ЦС/АНТИ-ПАТТЕРНЫ/Беспорядок в импортах)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
import argparse
import os
import httpx
from dotenv import load_dotenv
import json
```
**Хорошо:**
```python
import argparse
import json
import os

import httpx

from dotenv import load_dotenv
```

***

**Пример  из Анти-паттерна [Беспорядок в скобках и переносах](../../../ЦС/АНТИ-ПАТТЕРНЫ/Беспорядок в скобках и переносах)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
foreign_manager_fieldset = (
    (None, {
        'fields': (
            'name',
        ),
    }),
)
```
**Хорошо:**
```python
foreign_manager_fieldset = ((None, {'fields': ('name')}))
```

***

**Пример 1 из Анти-паттерна [Буква вместо названия](../../../ЦС/АНТИ-ПАТТЕРНЫ/Буква вместо названия)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
capitals = ['Москва', 'Лондон', 'Париж']

for i in capitals:
    ...
```
**Хорошо:**
```python
capitals = ['Москва', 'Лондон', 'Париж']

for capital in capitals:
    ...
```

***

**Пример 2 из Анти-паттерна [Буква вместо названия](../../../ЦС/АНТИ-ПАТТЕРНЫ/Буква вместо названия)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
mentor = next((m for m in mentors if m.get("tg_chat_id") == chat_id), None)
```
**Хорошо:**
```python
mentor = next((mentor for mentor in mentors if mentor.get("tg_chat_id") == chat_id), None)
```

***

**Пример  из Анти-паттерна [Глагол в классе](../../../ЦС/АНТИ-ПАТТЕРНЫ/Глагол в классе)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
class FindBankRequest(BaseModel):
    ...


class FindBankResponse(BaseModel):
    ...
```
**Исключение:**
```python
class FindbankRequest(BaseModel):
    ...


class FindbankResponse(BaseModel):
    ...
```

***

**Пример 1 из Анти-паттерна [Глагол в переменной](../../../ЦС/АНТИ-ПАТТЕРНЫ/Глагол в переменной)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
calculate_area = 100
```
**Хорошо:**
```python
area = 100
```

***

**Пример 2 из Анти-паттерна [Глагол в переменной](../../../ЦС/АНТИ-ПАТТЕРНЫ/Глагол в переменной)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
valid_json = True
```
**Хорошо:**
```python
is_valid_json = True
```

***

**Пример  из Анти-паттерна [Громадный блок кода](../../../ЦС/АНТИ-ПАТТЕРНЫ/Громадный блок кода)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
def download_book(book_id, img_path="/path/to/img/", book_path="/path/to/file/"):
    ...
    img_rel_path = soup.find('div', class_='bookimage').find('img')['src']
    img_url = urljoin(book_page_url, img_rel_path)
    response = requests.get(img_url)
    ...
    with open(img_path, 'w') as img:
        img.write(response.content)
    ...
    response = requests.get(book_url)
    ...
    with open(book_path, 'w') as book:
        book.write(response.text)
    ...
```
**Хорошо:**
```python
def download_text(url, book_path="/path/to/book/"):
    response = requests.get(url)
    ...
    with open(book_path, 'w') as book:
        book.write(response.text)


def download_image(url, img_path="/path/to/img/"):
    response = requests.get(url)
    ...
    with open(img_path, 'w') as img:
        img.write(response.content)


def get_image_url(soup, book_page_url):
    img_rel_path = soup.find('div', class_='bookimage').find('img')['src']
    img_url = urljoin(book_page_url, img_rel_path)
    return img_url


def download_book(book_id):
    ...
    img_url = get_image_url(soup, book_page_url)
    download_image(img_url, img_path)
    download_text(book_url, book_path)
```

***

**Пример 1 из Анти-паттерна [Забытая точка](../../../ЦС/АНТИ-ПАТТЕРНЫ/Забытая точка)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
'''Это пример docstring в тройных одиночных кавычках с забытой точкой'''
```
**Хорошо:**
```python
'''Это пример docstring в тройных одиночных кавычках.'''
```

***

**Пример 2 из Анти-паттерна [Забытая точка](../../../ЦС/АНТИ-ПАТТЕРНЫ/Забытая точка)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
from math import pi

def calculate_circle_area(radius):
    '''Вычисляет площадь круга'''
    circle_area = pi * (radius ** 2)
    return circle_area
```
**Хорошо:**
```python
from math import pi

def calculate_circle_area(radius):
    '''Вычисляет площадь круга.'''
    circle_area = pi * (radius ** 2)
    return circle_area
```

***

**Пример 3 из Анти-паттерна [Забытая точка](../../../ЦС/АНТИ-ПАТТЕРНЫ/Забытая точка)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
from pydantic import BaseModel, ConfigDict

class UserSchema(BaseModel):
    username: str
    '''Уникальное имя пользователя'''
    age: int
    '''Возраст пользователя'''

    model_config = ConfigDict(
        use_attribute_docstrings=True,
    )
```
**Хорошо:**
```python
from pydantic import BaseModel, ConfigDict

class UserSchema(BaseModel):
    username: str
    '''Уникальное имя пользователя.'''
    age: int
    '''Возраст пользователя.'''

    model_config = ConfigDict(
        use_attribute_docstrings=True,
    )
```

***

**Пример  из Анти-паттерна [Забытые открытые файлы](../../../ЦС/АНТИ-ПАТТЕРНЫ/Забытые открытые файлы)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
def get_lesson(filepath):
    file = open(filepath, 'r')
    raw_lesson = file.read()
    ...
```
**Хорошо:**
```python
def get_lesson(filepath):
    with open(filepath, 'r') as file:
        raw_lesson = file.read()
    ...
```

***

**Пример 1 из Анти-паттерна [Забытый DoesNotExist](../../../ЦС/АНТИ-ПАТТЕРНЫ/Забытый DoesNotExist)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
product = Product.objects.get(id=product_id)
```
**Хорошо:**
```python
def get_product(product_id):
    try:
        product = Product.objects.get(id=product_id)
    except Product.DoesNotExist:
        logger.error(f'Продукт с id={product_id} не сущуствует.')
        product = None
    return product
```

***

**Пример 2 из Анти-паттерна [Забытый DoesNotExist](../../../ЦС/АНТИ-ПАТТЕРНЫ/Забытый DoesNotExist)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
product = Product.objects.get(id=product_id)
```
**Хорошо:**
```python
from django.core.exceptions import ObjectDoesNotExist

def get_product(product_id):
    try:
        product = Product.objects.get(id=product_id)
    except ObjectDoesNotExist:
        logger.error(f'Продукт с id={product_id} не сущуствует.')
        product = None
    return product
```

***

**Пример 3 из Анти-паттерна [Забытый DoesNotExist](../../../ЦС/АНТИ-ПАТТЕРНЫ/Забытый DoesNotExist)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
def view_product(request, product_id):
    product = Product.objects.get(id=product_id)
    ...
    render(request, 'product.html', context=context)
```
**Хорошо:**
```python
from django.shortcuts import get_object_or_404

def view_product(request, product_id):
    product = get_object_or_404(Product, id=product_id)
    ...
    render(request, 'product.html', context=context)
```

***

**Пример 1 из Анти-паттерна [Закомментированный код](../../../ЦС/АНТИ-ПАТТЕРНЫ/Закомментированный код)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
def do_something(value):
    # print(value)
    ...
```
**Хорошо:**
```python
def do_something(value):
    ...
```

***

**Пример 2 из Анти-паттерна [Закомментированный код](../../../ЦС/АНТИ-ПАТТЕРНЫ/Закомментированный код)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
from math import pi


def calculate_circle_area(radius):
    circle_area = pi * radius ** 2
    return circle_area


# def calculate_square_area(side):
#    return side * side


def main():
    radius = ...
    circle_area = calculate_circle_area(radius)
```
**Хорошо:**
```python
from math import pi


def calculate_circle_area(radius):
    circle_area = pi * radius ** 2
    return circle_area


def main():
    radius = ...
    circle_area = calculate_circle_area(radius)
```

***

**Пример  из Анти-паттерна [Замалчивание исключений](../../../ЦС/АНТИ-ПАТТЕРНЫ/Замалчивание исключений)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
try:
    do_something()
except ImportantError:
    pass
```
**Плохо:**
```python
try:
    do_something()
except ImportantError:
    continue
```
**Хорошо:**
```python
try:
    do_something()
except ImportantError as e:
    logging.error(f'Error: {e}')
```

***

**Пример 1 из Анти-паттерна [Злоупотребление  args и kwargs](../../../ЦС/АНТИ-ПАТТЕРНЫ/Злоупотребление  args и kwargs)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
def add_numbers(*args):
    if len(args) != 2:
        raise ValueError('Функция ожидает ровно два аргумента')
    return args[0] + args[1]

result = add_numbers(3, 7)
```
**Хорошо:**
```python
def add_numbers(num1, num2):
    return num1 + num2

result = add_numbers(3, 7)
```

***

**Пример 2 из Анти-паттерна [Злоупотребление  args и kwargs](../../../ЦС/АНТИ-ПАТТЕРНЫ/Злоупотребление  args и kwargs)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
def create_user(**kwargs):
    username = kwargs.get('username')
    email = kwargs.get('email')
    age = kwargs.get('age')

    if not username or not email:
        raise ValueError('username and email are required')
    return {
        'username': username,
        'email': email,
        'age': age if age else 'unknown',
    }

user1 = create_user(username='john_doe', email='john@example.com', age=30)
user2 = create_user(username='jane_doe', email='jane@example.com')
```
**Хорошо:**
```python
def create_user(username, email, age=None):
    if not username or not email:
        raise ValueError('username and email are required')
    return {
        'username': username,
        'email': email,
        'age': age if age else 'unknown',
    }

user1 = create_user(username='john_doe', email='john@example.com', age=30)
user2 = create_user(username='jane_doe', email='jane@example.com')
```

***

**Пример 3 из Анти-паттерна [Злоупотребление  args и kwargs](../../../ЦС/АНТИ-ПАТТЕРНЫ/Злоупотребление  args и kwargs)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
def display_user_info(user_info):
    name = user_info.get('name')
    age = user_info.get('age')
    work = user_info.get('work')
    ...
```
**Хорошо:**
```python
def display_user_info(name, age, work):
    ...
```

***

**Пример 1 из Анти-паттерна [Злоупотребление if-elif-else](../../../ЦС/АНТИ-ПАТТЕРНЫ/Злоупотребление if-elif-else)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
customer_type = ...

if customer_type == "bronze":
    discount = 5
elif customer_type == "silver":
    discount = 10
elif customer_type == "gold":
    discount = 15
elif customer_type == "platinum":
    discount = 20
else:
    discount = 0
```
**Хорошо:**
```python
customer_type = ...

discounts = {
    "bronze": 5,
    "silver": 10,
    "gold": 15,
    "platinum": 20,
}

discount = discounts.get(customer_type, 0)
```

***

**Пример 2 из Анти-паттерна [Злоупотребление if-elif-else](../../../ЦС/АНТИ-ПАТТЕРНЫ/Злоупотребление if-elif-else)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
def get_month(month_number):
    if month_number == 1:
        return 'Январь'
    elif month_number == 2:
        return 'Февраль'
    elif month_number == 3:
        return 'Март'
    ...
    else:
        return 'Неверный номер месяца'

month_name = get_month_name(3)
```
**Хорошо:**
```python
def get_month(month_number):
    months = {
        1: 'Январь',
        2: 'Февраль',
        3: 'Март',
        ...
    }
    return months.get(month_number, 'Неверный номер месяца')

month_name = get_month_name(3)
```

***

**Пример  из Анти-паттерна [Игнорирование HTTP статуса ответа](../../../ЦС/АНТИ-ПАТТЕРНЫ/Игнорирование HTTP статуса ответа)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
def do_something(url, params):
    response = requests.get(url, params=params)
    ...
```
**Хорошо:**
```python
def do_something(url, params):
    try:
        response = requests.get(url, params=params)
        response.raise_for_status()
        ...
    except requests.exceptions.HTTPError as e:
        logging.error(f'Ошибка HTTPError: {e}')
        ...
    except requests.exceptions.ConnectionError as e:
        logging.error(f'Ошибка ConnectionError: {e}')
        ...
```

***

**Пример 1 из Анти-паттерна [Избегание list comprehensions](../../../ЦС/АНТИ-ПАТТЕРНЫ/Избегание list comprehensions)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
comments = []
for comment in tag_comments:
    comments.append(comment.find('span').text)
```
**Хорошо:**
```python
comments = [comment.find('span').text for comment in tag_comments]
```

***

**Пример 2 из Анти-паттерна [Избегание list comprehensions](../../../ЦС/АНТИ-ПАТТЕРНЫ/Избегание list comprehensions)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
numbers = [...]
even_numbers = []
for number in numbers:
    if number % 2 == 0:
        even_numbers.append(number)
```
**Хорошо:**
```python
numbers = [...]
even_numbers = [num for num in numbers if num % 2 == 0]
```

***

**Пример 1 из Анти-паттерна [Избегание метода .get()](../../../ЦС/АНТИ-ПАТТЕРНЫ/Избегание метода .get())**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
person_characteristics = {'name': 'Alice', 'age': 30}
city = person_characteristics['city']
```
**Хорошо:**
```python
person_characteristics = {'name': 'Alice', 'age': 30}
city = person_characteristics.get('city')
```

***

**Пример 2 из Анти-паттерна [Избегание метода .get()](../../../ЦС/АНТИ-ПАТТЕРНЫ/Избегание метода .get())**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
person_characteristics = {'name': 'Alice', 'age': 30}

if 'city' in person_characteristics:
    city = person_characteristics['city']
else:
    city = 'Unknown'
```
**Хорошо:**
```python
person_characteristics = {'name': 'Alice', 'age': 30}
city = person_characteristics.get('city', 'Unknown')
```

***

**Пример 1 из Анти-паттерна [Избыточность в названии](../../../ЦС/АНТИ-ПАТТЕРНЫ/Избыточность в названии)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
class EmployeePerson:
    ...
```
**Хорошо:**
```python
class Employee:
    ...
```

***

**Пример 2 из Анти-паттерна [Избыточность в названии](../../../ЦС/АНТИ-ПАТТЕРНЫ/Избыточность в названии)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
url_args = parser.parse_args()
url = url_args.url
```
**Хорошо:**
```python
args = parser.parse_args()
url = args.url
```

***

**Пример 3 из Анти-паттерна [Избыточность в названии](../../../ЦС/АНТИ-ПАТТЕРНЫ/Избыточность в названии)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
args = parser.parse_args()
parsed_url = urlparse(args.url)
link_without_protocol = f'{parsed_url.netloc}{parsed_url.path}'
```
**Хорошо:**
```python
args = parser.parse_args()
parsed_url = urlparse(args.url)
netloc_path = f'{parsed_url.netloc}{parsed_url.path}'
```

***

**Пример 4 из Анти-паттерна [Избыточность в названии](../../../ЦС/АНТИ-ПАТТЕРНЫ/Избыточность в названии)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
def get_hh_salary_statistics(all_vacancies):
    average_salary_result = {}
    ...
```
**Хорошо:**
```python
def get_hh_salary_statistics(all_vacancies):
    average_salary = {}
    ...
```

***

**Пример 5 из Анти-паттерна [Избыточность в названии](../../../ЦС/АНТИ-ПАТТЕРНЫ/Избыточность в названии)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
def calculate_total_sum_of_prices(prices):
    total_price = sum(prices)
    return total_price
```
**Хорошо:**
```python
def calculate_total_price(prices):
    total_price = sum(prices)
    return total_price
```

***

**Пример 6 из Анти-паттерна [Избыточность в названии](../../../ЦС/АНТИ-ПАТТЕРНЫ/Избыточность в названии)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
MAX_BG_APPS_ALLOWED_FOR_STEP_CHANGE = 10
```
**Хорошо:**
```python
MAX_BG_APPS_FOR_STEP_CHANGE = 10
```

***

**Пример 1 из Анти-паттерна [Избыточные True и False](../../../ЦС/АНТИ-ПАТТЕРНЫ/Избыточные True и False)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
def get_link_status(link):
    link_status = ...
    if link_status:
        return True
    else:
        return False
```
**Хорошо:**
```python
def get_link_status(link):
    link_status = ...
    return bool(link_status)
```

***

**Пример 2 из Анти-паттерна [Избыточные True и False](../../../ЦС/АНТИ-ПАТТЕРНЫ/Избыточные True и False)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
def has_add_permission(self, request):
    content_type = request.GET.get('content_type')
    object_id = request.GET.get('object_id')
    if content_type and object_id:
        return True
    return False
```
**Хорошо:**
```python
def has_add_permission(self, request):
    content_type = request.GET.get('content_type')
    object_id = request.GET.get('object_id')
    return bool(content_type and object_id)
```

***

**Пример 3 из Анти-паттерна [Избыточные True и False](../../../ЦС/АНТИ-ПАТТЕРНЫ/Избыточные True и False)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
SECONDS_LIMIT = 3600


def check_visit_length(duration, seconds_limit=SECONDS_LIMIT):
    seconds_on = duration.total_seconds()
    if seconds_on > seconds_limit:
        return True
    return False


def main():
    ...
    duration = ...
    is_strange_visit = check_visit_length(duration)
    ...
```
**Хорошо:**
```python
SECONDS_LIMIT = 3600


def check_visit_length(duration, seconds_limit=SECONDS_LIMIT):
    seconds_on = duration.total_seconds()
    return seconds_on > seconds_limit


def main():
    ...
    duration = ...
    is_strange_visit = check_visit_length(duration)
    ...
```

***

**Пример 1 из Анти-паттерна [Избыточные if-else](../../../ЦС/АНТИ-ПАТТЕРНЫ/Избыточные if-else)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
def get_link_status(link):
    ...
    if link_status:
        return True
    else:
        return False
```
**Хорошо:**
```python
def get_link_status(link):
    ...
    return bool(link_status)
```

***

**Пример 2 из Анти-паттерна [Избыточные if-else](../../../ЦС/АНТИ-ПАТТЕРНЫ/Избыточные if-else)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
def is_active_user(user):
    ...
    user_status = False
    return True if user_status else False
```
**Плохо:**
```python
def is_active_user(user):
    ...
    user_status = True
    return True if user_status else False
```
**Хорошо:**
```python
def is_active_user(user):
    ...
    user_status = False
    return user_status
```
**Хорошо:**
```python
def is_active_user(user):
    ...
    user_status = True
    return user_status
```

***

**Пример 3 из Анти-паттерна [Избыточные if-else](../../../ЦС/АНТИ-ПАТТЕРНЫ/Избыточные if-else)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
def get_book_image_url(soup, book_page_url):
    img_rel_path = soup.find('div', class_='bookimage').find('img')['src']
    img_src = urljoin(book_page_url, img_rel_path)
    return img_src

...
image_src = get_book_image_url(soup, book_url)
if image_src:
    download_image(image_src)
```
**Хорошо:**
```python
def get_book_image_url(soup, book_page_url):
    img_rel_path = soup.find('div', class_='bookimage').find('img')['src']
    img_src = urljoin(book_page_url, img_rel_path)
    return img_src

...
image_src = get_book_image_url(soup, book_url)
download_image(image_src)
```

***

**Пример 1 из Анти-паттерна [Избыточный try-except](../../../ЦС/АНТИ-ПАТТЕРНЫ/Избыточный try-except)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
try:
    value = collection['key']
except KeyError:
    value = None
```
**Хорошо:**
```python
value = collection.get('key')
```

***

**Пример 2 из Анти-паттерна [Избыточный try-except](../../../ЦС/АНТИ-ПАТТЕРНЫ/Избыточный try-except)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
capitals = {
    'Россия': 'Москва',
    'Англия': 'Лондон',
}


def get_capitals(country):
    try:
        capital = capitals[country]
    except KeyError:
        capital = None
    finally:
        return capital


print(get_capitals('Китай'))
```
**Хорошо:**
```python
capitals = {
    'Россия': 'Москва',
    'Англия': 'Лондон',
}


def get_capitals(country):
   return capitals.get(country)


print(get_capitals('Китай'))
```

***

**Пример 3 из Анти-паттерна [Избыточный try-except](../../../ЦС/АНТИ-ПАТТЕРНЫ/Избыточный try-except)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
def calculate(num1, num2):
    try:
        result = num1 + num2
        return result
    except TypeError:
        logging.warning('Ошибка: аргументы должны быть числами.')


print(calculate(1, '2'))
```
**Хорошо:**
```python
def calculate(num1, num2):
    if isinstance(num1, (int, float)) and isinstance(num2, (int, float)):
        result = num1 + num2
        return result
    logging.warning('Ошибка: аргументы должны быть числами.')


print(calculate(1, '2'))
```

***

**Пример  из Анти-паттерна [Излишняя вложенность](../../../ЦС/АНТИ-ПАТТЕРНЫ/Излишняя вложенность)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
if status:
    if status != 'expired':
        ...
```
**Хорошо:**
```python
if status and status != 'expired':
    ...
```

***

**Пример  из Анти-паттерна [Изменение объектов по умолчанию](../../../ЦС/АНТИ-ПАТТЕРНЫ/Изменение объектов по умолчанию)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
def get_user_characteristics(user_id, extra_user_fields=[]):
    default_user_fields = ['age', 'work']
    extra_user_fields.extend(default_user_fields)
    return extra_user_fields

user_1_characteristics = get_user_characteristics(1)
# ['age', 'work']
user_2_characteristics = get_user_characteristics(2)
# ['age', 'work', 'age', 'work']
user_3_characteristics = get_user_characteristics(3, ['phone'])
# ['phone', 'age', 'work']
user_4_characteristics = get_user_characteristics(4)
# ['age', 'work', 'age', 'work', 'age', 'work']
```
**Хорошо:**
```python
def get_user_characteristics(user_id, extra_user_fields=None):
    if extra_user_fields is None:
        extra_user_fields = []
    default_user_fields = ['age', 'work']
    extra_user_fields.extend(default_user_fields)
    return extra_user_fields

user_1_characteristics = get_user_characteristics(1)
# ['age', 'work']
user_2_characteristics = get_user_characteristics(2)
# ['age', 'work']
user_3_characteristics = get_user_characteristics(3, ['phone'])
# ['phone', 'age', 'work']
user_4_characteristics = get_user_characteristics(4)
# ['age', 'work']
```

***

**Пример 1 из Анти-паттерна [Изменяемые глобальные переменные](../../../ЦС/АНТИ-ПАТТЕРНЫ/Изменяемые глобальные переменные)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
total = 0

def add(value):
    global total
    total += value

def subtract(value):
    global total
    total -= value

add(10)  # total = 10
subtract(5)  # total = 5
```
**Хорошо:**
```python
def add(total, value):
    return total + value

def subtract(total, value):
    return total - value

total = 0
total = add(total, 10)  # total = 10
total = subtract(total, 5)  # total = 5
```

***

**Пример 2 из Анти-паттерна [Изменяемые глобальные переменные](../../../ЦС/АНТИ-ПАТТЕРНЫ/Изменяемые глобальные переменные)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
goods_basket = []

def add_product(product):
    global goods_basket
    goods_basket.append(product)

def clear_goods_basket():
    global goods_basket
    goods_basket.clear()

add_product('apple')  # goods_basket = ['apple']
add_product('orange')  # goods_basket = ['apple', 'orange']

clear_goods_basket()  # goods_basket = []
```
**Хорошо:**
```python
class GoodsBasket:
    def __init__(self):
        self.basket = []

    def add(self, product):
        self.basket.append(product)

    def clear(self):
        self.basket.clear()

goods_basket = GoodsBasket()
goods_basket.add('apple')  # goods_basket = ['apple']
goods_basket.add('orange')  # goods_basket = ['apple', 'orange']

goods_basket.clear()  # goods_basket = []
```

***

**Пример 1 из Анти-паттерна [Использование import со звёздочкой](../../../ЦС/АНТИ-ПАТТЕРНЫ/Использование import со звёздочкой)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
from math import *
```
**Хорошо:**
```python
from math import sqrt, sin
```

***

**Пример 2 из Анти-паттерна [Использование import со звёздочкой](../../../ЦС/АНТИ-ПАТТЕРНЫ/Использование import со звёздочкой)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
from basket_actions import *
from statistics import *
```
**Хорошо:**
```python
from basket_actions import add_product, clear_basket 
from statistics import average_product_price
```

***

**Пример 1 из Анти-паттерна [Класс в поле](../../../ЦС/АНТИ-ПАТТЕРНЫ/Класс в поле)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
owner.owner_phonenumber
```
**Хорошо:**
```python
owner.phonenumber
```

***

**Пример 2 из Анти-паттерна [Класс в поле](../../../ЦС/АНТИ-ПАТТЕРНЫ/Класс в поле)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
from django.db import models
from phonenumber_field.modelfields import PhoneNumberField


class Owner(models.Model):
    full_name = models.CharField(
        verbose_name='ФИО владельца',
        max_length=200,
    )
    owner_phonenumber = PhoneNumberField(
        verbose_name='Номер владельца',
        region='RU',
    )
    owner_flats = models.ManyToManyField(
        'Flat',
        verbose_name='Квартиры в собственности',
        related_name='owners',
    )

    def __str__(self):
        return self.full_name
```
**Хорошо:**
```python
from django.db import models
from phonenumber_field.modelfields import PhoneNumberField


class Owner(models.Model):
    full_name = models.CharField(
        verbose_name='ФИО владельца',
        max_length=200,
    )
    phonenumber = PhoneNumberField(
        verbose_name='Номер владельца',
        region='RU',
    )
    flats = models.ManyToManyField(
        'Flat',
        verbose_name='Квартиры в собственности',
        related_name='owners',
    )

    def __str__(self):
        return self.full_name
```

***

**Пример  из Анти-паттерна [Код на уровне модуля](../../../ЦС/АНТИ-ПАТТЕРНЫ/Код на уровне модуля)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
from environs import Env


env = Env()
env.read_env()

access_token =  env.str('ACCESS_TOKEN')


def do_something():
    ...


do_something()
```
**Хорошо:**
```python
from environs import Env


def do_something():
    ...


def main():
    env = Env()
    env.read_env()
    access_token =  env.str('ACCESS_TOKEN')
    do_something(access_token)


if __name__ == '__main__':
    main()
```

***

**Пример 1 из Анти-паттерна [Конфигурация на уровне модуля](../../../ЦС/АНТИ-ПАТТЕРНЫ/Конфигурация на уровне модуля)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
from environs import Env


env = Env()
env.read_env()
```
**Плохо:**
```python
from environs import Env


if __name__ == '__main__'
    env = Env()
    env.read_env()
```
**Хорошо:**
```python
from environs import Env


def main():
    env = Env()
    env.read_env()


if __name__ == '__main__'
    main()
```

***

**Пример 2 из Анти-паттерна [Конфигурация на уровне модуля](../../../ЦС/АНТИ-ПАТТЕРНЫ/Конфигурация на уровне модуля)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
from dotenv import load_dotenv


load_dotenv()
```
**Плохо:**
```python
from dotenv import load_dotenv


if __name__ == '__main__'
    load_dotenv()
```
**Хорошо:**
```python
from dotenv import load_dotenv


def main():
    load_dotenv()


if __name__ == '__main__'
    main()
```

***

**Пример 1 из Анти-паттерна [Конфликт имён](../../../ЦС/АНТИ-ПАТТЕРНЫ/Конфликт имён)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
from datetime import datetime

datetime = datetime(2025, 1, 1, 0, 0, 0)
```
**Хорошо:**
```python
from datetime import datetime

naive_datetime = datetime(2025, 1, 1, 0, 0, 0)
```

***

**Пример 2 из Анти-паттерна [Конфликт имён](../../../ЦС/АНТИ-ПАТТЕРНЫ/Конфликт имён)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
import pandas

pandas = 'Data science library'

df = pandas.DataFrame([1, 2, 3])
```
**Хорошо:**
```python
import pandas as pd

lib_name = 'Data science library'

df = pd.DataFrame([1, 2, 3])
```

***

**Пример 3 из Анти-паттерна [Конфликт имён](../../../ЦС/АНТИ-ПАТТЕРНЫ/Конфликт имён)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
str = 'Строка'
```
**Хорошо:**
```python
text = 'Строка'
```

***

**Пример 4 из Анти-паттерна [Конфликт имён](../../../ЦС/АНТИ-ПАТТЕРНЫ/Конфликт имён)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
class Postcard(BaseModel):
    id: int
    holiday_id: str = Field(alias='holidayId')
```
**Хорошо:**
```python
class Postcard(BaseModel):
    card_id: int = Field(alias='id')
    holiday_id: str = Field(alias='holidayId')
```

***

**Пример 5 из Анти-паттерна [Конфликт имён](../../../ЦС/АНТИ-ПАТТЕРНЫ/Конфликт имён)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
def open(file_path):
    ...
    return file
```
**Хорошо:**
```python
def get_file(file_path):
    ...
    return file
```

***

**Пример  из Анти-паттерна [Копипаста в try-except](../../../ЦС/АНТИ-ПАТТЕРНЫ/Копипаста в try-except)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
try:
    do_something()
except ValueError:
    logging.error('Value error')
except IndexError:
    logging.error('Index error')
```
**Хорошо:**
```python
try:
    do_something()
except (ValueError, IndexError) as e:
    logging.error(f'Error: {e}')
```

***

**Пример 1 из Анти-паттерна [Копипаста в коде](../../../ЦС/АНТИ-ПАТТЕРНЫ/Копипаста в коде)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
import os
import requests

from urllib.parse import urljoin


def fetch_nasa_images(api_key, folder):
    ...
    images_names = ...
    for image_name in images_names:
        ...
        image_url = ...
        image_path = os.path.join(folder, image_name)
        try:
            response = requests.get(image_url)
            response.raise_for_status()
            with open(image_path, 'wb') as file:
                file.write(response.content)
        except requests.exceptions.HTTPError as e:
            logging.info(f'HTTPError: {e}')


def fetch_spacex_images(flight_id, folder):
    ...
    images_names = ...
    for image_name in images_names:
        ...
        image_url = urljoin(..., flight_id)
        image_path = os.path.join(folder, image_name)
        try:
            response = requests.get(image_url)
            response.raise_for_status()
            with open(image_path, 'wb') as file:
                file.write(response.content)
        except requests.exceptions.HTTPError as e:
            logging.info(f'HTTPError: {e}')


def main():
    ...
    fetch_nasa_images(nasa_api_key, nasa_imgs_folder)
    fetch_spacex_images(spacex_api_key, spacex_imgs_folder)
```
**Хорошо:**
```python
import os
import requests

from urllib.parse import urljoin


def download_image(image_path, image_url):
    try:
        response = requests.get(image_url)
        response.raise_for_status()
    except requests.exceptions.HTTPError as e:
        logging.info(f'HTTPError: {e}')

    with open(image_path, 'wb') as file:
        file.write(response.content)


def fetch_nasa_images(api_key, folder):
    ...
    images_names = ...
    for image_name in images_names:
        ...
        image_url = ...
        image_path = os.path.join(folder, image_name)
        download_image(image_path, image_url)


def fetch_spacex_images(flight_id, folder):
    ...
    images_names = ...
    for image_name in images_names:
        ...
        image_url = urljoin(..., flight_id)
        image_path = os.path.join(folder, image_name)
        download_image(image_path, image_url)


def main():
    ...
    fetch_nasa_images(nasa_api_key, nasa_imgs_folder)
    fetch_spacex_images(spacex_api_key, spacex_imgs_folder)
```

***

**Пример 2 из Анти-паттерна [Копипаста в коде](../../../ЦС/АНТИ-ПАТТЕРНЫ/Копипаста в коде)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
...
    if mentor:
        text = (
            f'🎉 Привет, Ментор {mentor["name"]["first"]}! 🎉\n\n'
            'Это бот для отправки поздравлений ментору ❤️\n\n'
            '✨ Нажмите кнопку "ОТПРАВИТЬ ОТКРЫТКУ" чтобы отправить поздравления! ✨'
        )
        keyboard = main_keyboard
    else:
        text = (
            f'🎉 Привет, Ученик {username}! 🎉\n\n'
            'Это бот для отправки поздравлений ментору ❤️\n\n'
            '✨ Нажмите кнопку "ОТПРАВИТЬ ОТКРЫТКУ" чтобы порадовать своего ментора! ✨'
        )
        keyboard = main_keyboard

    await message.answer(text, reply_markup=keyboard)
```
**Хорошо:**
```python
...
    if mentor:
        recipient = f'Ментор {current_mentor["name"]["first"]}'
        action = 'отправить поздравления'
    else:
        recipient = f'Ученик {message.from_user.username}'
        action = 'порадовать своего ментора'

    text = (
        f'🎉 Привет, {recipient}! 🎉\n\n'
        'Это бот для отправки поздравлений ментору ❤️\n\n'
        f'✨ Нажмите кнопку "ОТПРАВИТЬ ОТКРЫТКУ" чтобы {action}! ✨'
    )
    keyboard = main_keyboard

    await message.answer(text, reply_markup=keyboard)
```

***

**Пример 1 из Анти-паттерна [Лишние преобразования типов](../../../ЦС/АНТИ-ПАТТЕРНЫ/Лишние преобразования типов)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
from django.db import models


class Owner(models.Model):
    ...

    def __str__(self):
        return f'{self.name}'
```
**Хорошо:**
```python
from django.db import models


class Owner(models.Model):
    ...

    def __str__(self):
        return self.name
```

***

**Пример 2 из Анти-паттерна [Лишние преобразования типов](../../../ЦС/АНТИ-ПАТТЕРНЫ/Лишние преобразования типов)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
from django.db import models


class Owner(models.Model):
    ...

    def __str__(self):
        return str(self.name)
```
**Хорошо:**
```python
from django.db import models


class Owner(models.Model):
    ...

    def __str__(self):
        return self.name
```

***

**Пример 3 из Анти-паттерна [Лишние преобразования типов](../../../ЦС/АНТИ-ПАТТЕРНЫ/Лишние преобразования типов)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
url = str(input('Введите ссылку: '))
```
**Хорошо:**
```python
url = input('Введите ссылку: ')
```

***

**Пример 4 из Анти-паттерна [Лишние преобразования типов](../../../ЦС/АНТИ-ПАТТЕРНЫ/Лишние преобразования типов)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
try:
        ...
    except ValueError as err:
        await message.answer(str(err))
```
**Хорошо:**
```python
try:
        ...
    except ValueError as err:
        await message.answer(err)
```

***

**Пример 1 из Анти-паттерна [Лишний код в try-except](../../../ЦС/АНТИ-ПАТТЕРНЫ/Лишний код в try-except)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
def get_percent(payload):
    try:
        number = float(payload)  # Преобразование данных (может вызвать ValueError)
        logger.info("Обработка числа:", number) # Логирование обычно не вызывает исключений
        result = number * 100 # Дополнительная логика, не связанная напрямую с преобразованием
    except ValueError as err:
        logger.error("Произошла ошибка:", err)
        result = None
    return result
```
**Хорошо:**
```python
def get_percent(payload):
    try:
        number = float(payload)
    except ValueError as err:
        logger.error("Произошла ошибка:", err)
        return

    logger.info("Обработка числа:", number)
    return number * 100
```

***

**Пример 2 из Анти-паттерна [Лишний код в try-except](../../../ЦС/АНТИ-ПАТТЕРНЫ/Лишний код в try-except)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
try:
    first_word = "Привет"
    second_word = "мир"
    whole_phrase = f"{first_word}, {second_word}!"
    print(whole_phrase)
except Exception as err:
    print("Произошло исключение:", err)
```
**Хорошо:**
```python
first_word = "Привет"
second_word = "мир"
whole_phrase = f"{first_word}, {second_word}!"
print(whole_phrase)
```

***

**Пример 1 из Анти-паттерна [Ложный глагол в функции](../../../ЦС/АНТИ-ПАТТЕРНЫ/Ложный глагол в функции)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
def close_state(self, obj):
    return bool(obj.closed_at)
```
**Хорошо:**
```python
def define_close_state(self, obj):
    return bool(obj.closed_at)
```

***

**Пример 2 из Анти-паттерна [Ложный глагол в функции](../../../ЦС/АНТИ-ПАТТЕРНЫ/Ложный глагол в функции)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
def is_draft_deal(self, obj):
    ...
```
**Хорошо:**
```python
def check_deal_is_draft(self, obj):
    ...
```

***

**Пример 1 из Анти-паттерна [Магическое число](../../../ЦС/АНТИ-ПАТТЕРНЫ/Магическое число)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
def calculate(value):
    return value + 108
```
**Хорошо:**
```python
def add_magic_num(value):
    magic_num = 108
    return value + magic_num
```

***

**Пример 2 из Анти-паттерна [Магическое число](../../../ЦС/АНТИ-ПАТТЕРНЫ/Магическое число)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
def calculate_circle_area(radius):
    circle_area = 3.14 * radius ** 2
    return circle_area
```
**Плохо:**
```python
PI_NUMBER = 3.14159

def calculate_circle_area(radius):
    circle_area = PI_NUMBER * radius ** 2
    return circle_area
```
**Хорошо:**
```python
from math import pi

def calculate_circle_area(radius):
    circle_area = pi * radius ** 2
    return circle_area
```

***

**Пример 1 из Анти-паттерна [Многозадачная функция](../../../ЦС/АНТИ-ПАТТЕРНЫ/Многозадачная функция)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
def download_image_and_upload_it_to_telegram(url, tg_token):
    ...
```
**Хорошо:**
```python
def download_image(url):
    ...

def upload_image_to_telegram(tg_token):
    ...
```

***

**Пример 2 из Анти-паттерна [Многозадачная функция](../../../ЦС/АНТИ-ПАТТЕРНЫ/Многозадачная функция)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
def extract_salaries(vacancies):
    ...

def calculate_statistics(vacancies):
    salaries = extract_salaries(vacancies)
    average_salary = int(sum(salaries) / len(salaries)) if salaries else 0
    ...

def main():
    ...
    statistics = ...
    vacancies = ...
    statistics[language] = calculate_statistics(vacancies)
    ...
```
**Хорошо:**
```python
def extract_salaries(vacancies):
    ...

def calculate_statistics(vacancies, salaries):
    average_salary = int(sum(salaries) / len(salaries)) if salaries else 0
    ...

def main():
    ...
    statistics = ...
    vacancies = ...
    salaries = extract_salaries(vacancies)
    statistics[language] = calculate_statistics(vacancies, salaries)
    ...
```

***

**Пример 1 из Анти-паттерна [Множественное число в классе](../../../ЦС/АНТИ-ПАТТЕРНЫ/Множественное число в классе)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
class Animals:
    ...
```
**Хорошо:**
```python
class Animal:
    ...
```

***

**Пример 2 из Анти-паттерна [Множественное число в классе](../../../ЦС/АНТИ-ПАТТЕРНЫ/Множественное число в классе)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
class EventsSchedule:
    ...
```
**Хорошо:**
```python
class EventSchedule:
    ...
```

***

**Пример 1 из Анти-паттерна [Мутация переменных](../../../ЦС/АНТИ-ПАТТЕРНЫ/Мутация переменных)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
response = requests.get(url)
response.raise_for_status()
response = response.json()
```
**Хорошо:**
```python
response = requests.get(url)
response.raise_for_status()
payload = response.json()
```

***

**Пример 2 из Анти-паттерна [Мутация переменных](../../../ЦС/АНТИ-ПАТТЕРНЫ/Мутация переменных)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
args = parser.parse_args()
parsed_url = urlparse(args.url)
parsed_url = f'{parsed_url.netloc}{parsed_url.path}'
```
**Хорошо:**
```python
args = parser.parse_args()
parsed_url = urlparse(args.url)
netloc_path = f'{parsed_url.netloc}{parsed_url.path}'
```

***

**Пример 1 из Анти-паттерна [Название vs Path](../../../ЦС/АНТИ-ПАТТЕРНЫ/Название vs Path)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
def download_image(url, filename, params=None):
    response = requests.get(url, params=params)
    response.raise_for_status()

    with open(filename, 'wb') as file:
        file.write(response.content)
```
**Хорошо:**
```python
def download_image(url, filepath, params=None):
    response = requests.get(url, params=params)
    response.raise_for_status()

    with open(filepath, 'wb') as file:
        file.write(response.content)
```

***

**Пример 2 из Анти-паттерна [Название vs Path](../../../ЦС/АНТИ-ПАТТЕРНЫ/Название vs Path)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
from pathlib import Path


filename = Path(files_folder_path) / filename
with open(filename, 'r') as file:
    ...
```
**Хорошо:**
```python
from pathlib import Path


filepath = Path(files_folder_path) / filename
with open(filepath, 'r') as file:
    ...
```

***

**Пример 1 из Анти-паттерна [Название с `my`](../../../ЦС/АНТИ-ПАТТЕРНЫ/Название с `my`)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
with open(file_path, "w") as my_file:
    ...
```
**Хорошо:**
```python
with open(file_path, "w") as file:
    ...
```

***

**Пример 2 из Анти-паттерна [Название с `my`](../../../ЦС/АНТИ-ПАТТЕРНЫ/Название с `my`)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
from environs import Env


def main():
    env = Env()
    env.read_env()
    my_vk_access_token =  env.str('VK_ACCESS_TOKEN')
```
**Хорошо:**
```python
from environs import Env


def main():
    env = Env()
    env.read_env()
    vk_access_token =  env.str('VK_ACCESS_TOKEN')
```

***

**Пример 3 из Анти-паттерна [Название с `my`](../../../ЦС/АНТИ-ПАТТЕРНЫ/Название с `my`)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
def get_my_user_info(user_id):
    ...
```
**Хорошо:**
```python
def get_user_info(user_id):
    ...
```

***

**Пример 4 из Анти-паттерна [Название с `my`](../../../ЦС/АНТИ-ПАТТЕРНЫ/Название с `my`)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Допустимо:**
```python
def get_tasks(user_id):
    ...
    return my_tasks, group_tasks
```
**Хорошо:**
```python
def get_tasks(user_id):
    ...
    return current_user_tasks, group_tasks
```

***

**Пример 1 из Анти-паттерна [Название с `of`](../../../ЦС/АНТИ-ПАТТЕРНЫ/Название с `of`)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
number_of_active_users = ...
```
**Хорошо:**
```python
active_users_num = ...
```

***

**Пример 2 из Анти-паттерна [Название с `of`](../../../ЦС/АНТИ-ПАТТЕРНЫ/Название с `of`)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
def get_info_of_user(user_id):
    ...
```
**Хорошо:**
```python
def get_user_info(user_id):
    ...
```

***

**Пример 3 из Анти-паттерна [Название с `of`](../../../ЦС/АНТИ-ПАТТЕРНЫ/Название с `of`)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
class ProductOfCompany:
    def __init__(self, name, price):
        self.name = name
        self.price = price
```
**Хорошо:**
```python
class Product:
    def __init__(self, name, price):
        self.name = name
        self.price = price
```

***

**Пример  из Анти-паттерна [Нарушение инкапсуляции](../../../ЦС/АНТИ-ПАТТЕРНЫ/Нарушение инкапсуляции)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
class ExampleClass:
    def __init__(self):
        self._protected_attribute = 'I am protected'

    def _protected_method(self):
        return 'This is a protected method'


obj = ExampleClass()
protected_method = obj._protected_method()
protected_attribute = obj._protected_attribute
```
**Хорошо:**
```python
class ExampleClass:
    def __init__(self):
        self._protected_attribute = 'I am protected'

    def _protected_method(self):
        return 'This is a protected method'

    def get_protected_method(self):
        return self._protected_method()

    def get_protected_attribute(self):
        return self._protected_attribute


obj = ExampleClass()
protected_method = obj.get_protected_method()
protected_attribute = obj.get_protected_attribute()
```

***

**Пример 1 из Анти-паттерна [Не читается по-английски](../../../ЦС/АНТИ-ПАТТЕРНЫ/Не читается по-английски)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
num_active_users = ...
```
**Хорошо:**
```python
active_users_num = ...
```

***

**Пример 2 из Анти-паттерна [Не читается по-английски](../../../ЦС/АНТИ-ПАТТЕРНЫ/Не читается по-английски)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
def user_info_get(user_id):
    ...
```
**Хорошо:**
```python
def get_user_info(user_id):
    ...
```

***

**Пример 3 из Анти-паттерна [Не читается по-английски](../../../ЦС/АНТИ-ПАТТЕРНЫ/Не читается по-английски)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
class ConverterCurrency:
    def __init__(self, exchange_rate):
        self.exchange_rate = exchange_rate

    def convert_amount(self, amount):
        return amount * self.exchange_rate
```
**Хорошо:**
```python
class CurrencyConverter:
    def __init__(self, exchange_rate):
        self.exchange_rate = exchange_rate

    def convert_amount(self, amount):
        return amount * self.exchange_rate
```

***

**Пример 4 из Анти-паттерна [Не читается по-английски](../../../ЦС/АНТИ-ПАТТЕРНЫ/Не читается по-английски)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
class EmployeePerson:
    ...
```
**Хорошо:**
```python
class Employee:
    ...
```

***

**Пример 5 из Анти-паттерна [Не читается по-английски](../../../ЦС/АНТИ-ПАТТЕРНЫ/Не читается по-английски)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
def get_statistics_salary(all_vacancies):
    ...
```
**Хорошо:**
```python
def get_salary_statistics(all_vacancies):
    ...
```

***

**Пример 6 из Анти-паттерна [Не читается по-английски](../../../ЦС/АНТИ-ПАТТЕРНЫ/Не читается по-английски)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
def soon_birthday(args):
    ...
    return birthday_datetime
```
**Хорошо:**
```python
def calculate_birthday(args):
    ...
    return birthday_datetime
```

***

**Пример 7 из Анти-паттерна [Не читается по-английски](../../../ЦС/АНТИ-ПАТТЕРНЫ/Не читается по-английски)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
ENABLE_CALCULATE_COMMISSION_APPLICATION: bool = Field(...)
```
**Хорошо:**
```python
ENABLE_APPLICATION_COMMISSION_CALCULATION: bool = Field(...)
```

***

**Пример 8 из Анти-паттерна [Не читается по-английски](../../../ЦС/АНТИ-ПАТТЕРНЫ/Не читается по-английски)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
ENABLE_CALCULATE_INCOME_RUB_DEAL: bool = Field(...)
```
**Хорошо:**
```python
ENABLE_DEAL_INCOME_RUB_CALCULATION: bool = Field(...)
```

***

**Пример  из Анти-паттерна [Неверная структура кода](../../../ЦС/АНТИ-ПАТТЕРНЫ/Неверная структура кода)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
import library


def do_something():
    NOTIFICATION = 'this is a global constant'
    import another_library
    ...


def main():
    do_something()
    ...


main()
```
**Хорошо:**
```python
import library
import another_library


NOTIFICATION = 'this is a global constant'


def do_something():
    ...


def main():
    do_something()
    ...


if __name__ == '__main__':
    main()
```

***

**Пример  из Анти-паттерна [Неверный выбор типа данных](../../../ЦС/АНТИ-ПАТТЕРНЫ/Неверный выбор типа данных)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
not_unique_numbers = [1, 1, 2, 3, 1, 4, 3, ...]
unique_numbers = [5]

for number in not_unique_numbers:
    if number not in unique_numbers:
        unique_numbers.append(number)
```
**Хорошо:**
```python
not_unique_numbers = [1, 1, 2, 3, 1, 4, 3, ...]
unique_numbers = {5}
unique_numbers = set(not_unique_numbers).union(unique_numbers)
```

***

**Пример 1 из Анти-паттерна [Неверный порядок слов](../../../ЦС/АНТИ-ПАТТЕРНЫ/Неверный порядок слов)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
num_active_users = ...
```
**Хорошо:**
```python
active_users_num = ...
```

***

**Пример 2 из Анти-паттерна [Неверный порядок слов](../../../ЦС/АНТИ-ПАТТЕРНЫ/Неверный порядок слов)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
def user_info_get(user_id):
    ...
```
**Хорошо:**
```python
def get_user_info(user_id):
    ...
```

***

**Пример 3 из Анти-паттерна [Неверный порядок слов](../../../ЦС/АНТИ-ПАТТЕРНЫ/Неверный порядок слов)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
def get_info_user(user_id):
    ...
```
**Хорошо:**
```python
def get_user_info(user_id):
    ...
```

***

**Пример 4 из Анти-паттерна [Неверный порядок слов](../../../ЦС/АНТИ-ПАТТЕРНЫ/Неверный порядок слов)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
class ConverterCurrency:
    def __init__(self, exchange_rate):
        self.exchange_rate = exchange_rate

    def convert_amount(self, amount):
        return amount * self.exchange_rate
```
**Хорошо:**
```python
class CurrencyConverter:
    def __init__(self, exchange_rate):
        self.exchange_rate = exchange_rate

    def convert_amount(self, amount):
        return amount * self.exchange_rate
```

***

**Пример  из Анти-паттерна [Неверный регистр](../../../ЦС/АНТИ-ПАТТЕРНЫ/Неверный регистр)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
constant_number = ...

class some_class():
    ...

def DO_FUNCTION():
    ...

Some_VARIABLE = ...
```
**Хорошо:**
```python
CONSTANT_NUMBER = ...

class SomeClass():
    ...

def do_function():
    ...

some_variable = ...
```

***

**Пример 1 из Анти-паттерна [Незаметный флаг](../../../ЦС/АНТИ-ПАТТЕРНЫ/Незаметный флаг)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
secret_required = True
```
**Хорошо:**
```python
secret_is_required = True
```

***

**Пример 2 из Анти-паттерна [Незаметный флаг](../../../ЦС/АНТИ-ПАТТЕРНЫ/Незаметный флаг)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
draft_deal = True
```
**Хорошо:**
```python
is_draft_deal = True
```

***

**Пример  из Анти-паттерна [Неизвестная аббревиатура](../../../ЦС/АНТИ-ПАТТЕРНЫ/Неизвестная аббревиатура)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
for ct in content_types:
    try:
        model = ct.model_class()
        verbose_name = model._meta.verbose_name.capitalize()
    except AttributeError:
        verbose_name = f"{ct.app_label.capitalize()} - {ct.model.capitalize()}"
    lookups.append((ct.id, verbose_name))
```
**Хорошо:**
```python
for content_type in content_types:
    try:
        model = content_type.model_class()
        verbose_name = model._meta.verbose_name.capitalize()
    except AttributeError:
        verbose_name = f"{content_type.app_label.capitalize()} - {content_type.model.capitalize()}"
    lookups.append((content_type.id, verbose_name))
```

***

**Пример 1 из Анти-паттерна [Неконсистентность](../../../ЦС/АНТИ-ПАТТЕРНЫ/Неконсистентность)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
if not advance_amount and not advance_percent:
    raise ValidationError(
        'Введены некорректные значения для полей '
        '"Размер аванса в процентах" и "Размер аванса, руб.". '
        'Сбросить оба значения поля можно убрав галочку с поля "Авансирование".')
elif advance_amount > initial_contract_price:
    raise ValidationError(
        'Значение поля "Размер аванса, руб." не может быть больше'
        'значения поля "Начальная (максимальная) цена контракта, руб."',
    )
```
**Хорошо:**
```python
if not advance_amount and not advance_percent:
    raise ValidationError(
        'Введены некорректные значения для полей '
        '"Размер аванса в процентах" и "Размер аванса, руб.". '
        'Сбросить оба значения поля можно убрав галочку с поля "Авансирование".'
    )
elif advance_amount > initial_contract_price:
    raise ValidationError(
        'Значение поля "Размер аванса, руб." не может быть больше'
        'значения поля "Начальная (максимальная) цена контракта, руб."'
    )
```

***

**Пример 2 из Анти-паттерна [Неконсистентность](../../../ЦС/АНТИ-ПАТТЕРНЫ/Неконсистентность)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
if set_is_advance(is_advance, cleaned_data):
    return cleaned_data
elif 'advance_percent' in self.changed_data and 'advance_amount' not in self.changed_data:
    set_advance_if_advance_percent_change(
        initial_advance_percent, advance_amount, advance_percent, initial_contract_price, cleaned_data
    )
elif 'advance_amount' in self.changed_data and 'advance_percent' not in self.changed_data:
    set_advance_if_advance_amount_change(
        initial_advance_amount, advance_amount, advance_percent, initial_contract_price, cleaned_data)
```
**Хорошо:**
```python
if set_is_advance(is_advance, cleaned_data):
    return cleaned_data
elif 'advance_percent' in self.changed_data and 'advance_amount' not in self.changed_data:
    set_advance_if_advance_percent_change(
        initial_advance_percent, advance_amount, advance_percent, initial_contract_price, cleaned_data,
    )
elif 'advance_amount' in self.changed_data and 'advance_percent' not in self.changed_data:
    set_advance_if_advance_amount_change(
        initial_advance_amount, advance_amount, advance_percent, initial_contract_price, cleaned_data,
    )
```
**Хорошо:**
```python
if set_is_advance(is_advance, cleaned_data):
    return cleaned_data
elif 'advance_percent' in self.changed_data and 'advance_amount' not in self.changed_data:
    set_advance_if_advance_percent_change(
        initial_advance_percent, advance_amount, advance_percent, initial_contract_price, cleaned_data)
elif 'advance_amount' in self.changed_data and 'advance_percent' not in self.changed_data:
    set_advance_if_advance_amount_change(
        initial_advance_amount, advance_amount, advance_percent, initial_contract_price, cleaned_data)
```

***

**Пример 3 из Анти-паттерна [Неконсистентность](../../../ЦС/АНТИ-ПАТТЕРНЫ/Неконсистентность)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
@pytest.mark.parametrize('input_data, expected', [
    ((True, True, 13, 500, 1000), (13, 130)),
    ((True, True, None, 500, 1000), (None, None)),
    ((True, True, 13, None, 1000), (13, 130)),
])
```
**Хорошо:**
```python
@pytest.mark.parametrize(
    'input_data, expected',
    [
        ((True, True, 13, 500, 1000), (13, 130)),
        ((True, True, None, 500, 1000), (None, None)),
        ((True, True, 13, None, 1000), (13, 130)),
    ],
)
```

***

**Пример  из Анти-паттерна [Неконсистентность названий](../../../ЦС/АНТИ-ПАТТЕРНЫ/Неконсистентность названий)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
scout_data_fetchers = {
    'Gosbase': get_from_gosbase,
    'Tlfin': fetch_from_tlfin,
}
```
**Хорошо:**
```python
scout_data_fetchers = {
    'Gosbase': fetch_from_gosbase,
    'Tlfin': fetch_from_tlfin,
}
```

***

**Пример  из Анти-паттерна [Неоптимальное создание словаря](../../../ЦС/АНТИ-ПАТТЕРНЫ/Неоптимальное создание словаря)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
user_info = {}

user_info['name'] = user_name
user_info['age'] = user_age
if user_work:
    user_info['work'] = user_work
```
**Хорошо:**
```python
user_info = {
    'name': user_name,
    'age': user_age,
    'work': user_work if user_work else None,
}
```

***

**Пример 1 из Анти-паттерна [Неспецифический токен](../../../ЦС/АНТИ-ПАТТЕРНЫ/Неспецифический токен)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
from environs import Env


def main():
    env = Env()
    env.read_env()
    token = env.str('TOKEN')
```
**Допустимо:**
```python
from environs import Env


def main():
    env = Env()
    env.read_env()
    token = env.str('YANDEX_GEOCODER_TOKEN')
```
**Хорошо:**
```python
from environs import Env


def main():
    env = Env()
    env.read_env()
    geocoder_token = env.str('YANDEX_GEOCODER_TOKEN')
```

***

**Пример 2 из Анти-паттерна [Неспецифический токен](../../../ЦС/АНТИ-ПАТТЕРНЫ/Неспецифический токен)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
from environs import Env


def main():
    env = Env()
    env.read_env()
    chat_id = env.str('CHAT_ID')
```
**Допустимо:**
```python
from environs import Env


def main():
    env = Env()
    env.read_env()
    chat_id = env.str('TG_CHAT_ID')
```
**Хорошо:**
```python
from environs import Env


def main():
    env = Env()
    env.read_env()
    tg_chat_id = env.str('TG_CHAT_ID')
```

***

**Пример 1 из Анти-паттерна [Неточное название в .env](../../../ЦС/АНТИ-ПАТТЕРНЫ/Неточное название в .env)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
from environs import Env


env = Env()
env.read_env()


DATABASES = {
    'default': {
        'ENGINE': env.str('ENGINE'),
        'HOST': env.str('HOST'),
        'PORT': env.str('PORT'),
        'NAME': env.str('NAME'),
        'USER': env.str('USER'),
        'PASSWORD': env.str('PASSWORD'),
    }
}
```
**Хорошо:**
```python
from environs import Env


env = Env()
env.read_env()


DATABASES = {
    'default': {
        'ENGINE': env.str('DB_ENGINE'),
        'HOST': env.str('DB_HOST'),
        'PORT': env.str('DB_PORT'),
        'NAME': env.str('DB_NAME'),
        'USER': env.str('DB_USER'),
        'PASSWORD': env.str('DB_PASSWORD'),
    }
}
```

***

**Пример 2 из Анти-паттерна [Неточное название в .env](../../../ЦС/АНТИ-ПАТТЕРНЫ/Неточное название в .env)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
from environs import Env


def main():
    env = Env()
    env.read_env()
    token = env.str('TOKEN')
```
**Хорошо:**
```python
from environs import Env


def main():
    env = Env()
    env.read_env()
    token = env.str('YANDEX_GEOCODER_TOKEN')
```

***

**Пример 1 из Анти-паттерна [Неточное название класса](../../../ЦС/АНТИ-ПАТТЕРНЫ/Неточное название класса)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
class Service:
    def __init__(self, payment_payload):
        self.payment_payload = payment_payload

    def process_payment(self):
        ...
```
**Хорошо:**
```python
class PaymentService:
    def __init__(self, payment_payload):
        self.payment_payload = payment_payload

    def process_payment(self):
        ...
```

***

**Пример 2 из Анти-паттерна [Неточное название класса](../../../ЦС/АНТИ-ПАТТЕРНЫ/Неточное название класса)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
class Converter:
    def __init__(self, exchange_rate):
        self.exchange_rate = exchange_rate

    def convert_amount(self, amount):
        return amount * self.exchange_rate
```
**Хорошо:**
```python
class CurrencyConverter:
    def __init__(self, exchange_rate):
        self.exchange_rate = exchange_rate

    def convert_amount(self, amount):
        return amount * self.exchange_rate
```

***

**Пример 3 из Анти-паттерна [Неточное название класса](../../../ЦС/АНТИ-ПАТТЕРНЫ/Неточное название класса)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
class Person:

    def __init__(self, name, salary, bonus_percentage, is_good_employee):
        self.name = name
        self.salary = salary
        self.bonus_percentage = bonus_percentage
        self.is_good_employee = is_good_employee
        self.bonus = 0

    def calculate_full_salary(self):
        self.bonus = self.calculate_bonus()
        return self.salary + self.bonus

    def calculate_bonus(self):
        if self.is_good_employee:
            return self.salary * (self.bonus_percentage / 100)
        return 0
```
**Хорошо:**
```python
class Employee:

    def __init__(self, name, salary, bonus_percentage, is_good_employee):
        self.name = name
        self.salary = salary
        self.bonus_percentage = bonus_percentage
        self.is_good_employee = is_good_employee
        self.bonus = 0

    def calculate_full_salary(self):
        self.bonus = self.calculate_bonus()
        return self.salary + self.bonus

    def calculate_bonus(self):
        if self.is_good_employee:
            return self.salary * (self.bonus_percentage / 100)
        return 0
```

***

**Пример 1 из Анти-паттерна [Неточное название переменной](../../../ЦС/АНТИ-ПАТТЕРНЫ/Неточное название переменной)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
number = 2
salad = 'fruit salad'
fruits = ['apple', 'orange', 'banana', 'grapes']
```
**Хорошо:**
```python
servings_num = 2
salad_name = 'fruit salad'
salad_ingredients = ['apple', 'orange', 'banana', 'grapes']
```

***

**Пример 2 из Анти-паттерна [Неточное название переменной](../../../ЦС/АНТИ-ПАТТЕРНЫ/Неточное название переменной)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
def get_book(name, folder):
    ...
    return book
```
**Хорошо:**
```python
def get_book(book_name, books_folder_path):
    ...
    return book
```

***

**Пример 3 из Анти-паттерна [Неточное название переменной](../../../ЦС/АНТИ-ПАТТЕРНЫ/Неточное название переменной)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
class Employee:

    def __init__(self, name, money, percentage, is_good):
        self.name = name
        self.money = money
        self.percentage = percentage
        self.is_good = is_good
        self.bonus = 0

    def calculate_full_salary(self):
        self.bonus = self.calculate_bonus()
        return self.money + self.bonus

    def calculate_bonus(self):
        if self.is_good:
            return self.money * (self.percentage / 100)
        return 0
```
**Хорошо:**
```python
class Employee:

    def __init__(self, name, salary, bonus_percentage, is_good_employee):
        self.name = name
        self.salary = salary
        self.bonus_percentage = bonus_percentage
        self.is_good_employee = is_good_employee
        self.bonus = 0

    def calculate_full_salary(self):
        self.bonus = self.calculate_bonus()
        return self.salary + self.bonus

    def calculate_bonus(self):
        if self.is_good_employee:
            return self.salary * (self.bonus_percentage / 100)
        return 0
```

***

**Пример 4 из Анти-паттерна [Неточное название переменной](../../../ЦС/АНТИ-ПАТТЕРНЫ/Неточное название переменной)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
leading_app = deal.leading_application
bank = leading_app.get('bank_name')
portal = leading_app.get('portal_name')
```
**Хорошо:**
```python
leading_app = deal.leading_application
bank_name = leading_app.get('bank_name')
portal_name = leading_app.get('portal_name')
```

***

**Пример 1 из Анти-паттерна [Неточное название функции](../../../ЦС/АНТИ-ПАТТЕРНЫ/Неточное название функции)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
def get(book_name, books_folder_path):
    ...
    return book
```
**Плохо:**
```python
def get_something(book_name, books_folder_path):
    ...
    return book
```
**Хорошо:**
```python
def get_book(book_name, books_folder_path):
    ...
    return book
```

***

**Пример 2 из Анти-паттерна [Неточное название функции](../../../ЦС/АНТИ-ПАТТЕРНЫ/Неточное название функции)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
def book(book_name, books_folder_path):
    ...
    return book
```
**Хорошо:**
```python
def get_book(book_name, books_folder_path):
    ...
    return book
```

***

**Пример 3 из Анти-паттерна [Неточное название функции](../../../ЦС/АНТИ-ПАТТЕРНЫ/Неточное название функции)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
def soon_birthday(args):
    ...
    return birthday_datetime
```
**Хорошо:**
```python
def calculate_birthday(args):
    ...
    return birthday_datetime
```

***

**Пример 4 из Анти-паттерна [Неточное название функции](../../../ЦС/АНТИ-ПАТТЕРНЫ/Неточное название функции)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
from math import pi

def calculate_area(radius):
    circle_area = pi * (radius ** 2)
    return circle_area
```
**Хорошо:**
```python
from math import pi

def calculate_circle_area(radius):
    circle_area = pi * (radius ** 2)
    return circle_area
```

***

**Пример 5 из Анти-паттерна [Неточное название функции](../../../ЦС/АНТИ-ПАТТЕРНЫ/Неточное название функции)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
class Employee:

    def __init__(self, name, salary, bonus_percentage, is_good_employee):
        self.name = name
        self.salary = salary
        self.bonus_percentage = bonus_percentage
        self.is_good_employee = is_good_employee
        self.bonus = 0

    def get_salary(self):
        self.bonus = self.get_bonus()
        return self.salary + self.bonus

    def get_bonus(self):
        if self.is_good_employee:
            return self.salary * (self.bonus_percentage / 100)
        return 0
```
**Хорошо:**
```python
class Employee:

    def __init__(self, name, salary, bonus_percentage, is_good_employee):
        self.name = name
        self.salary = salary
        self.bonus_percentage = bonus_percentage
        self.is_good_employee = is_good_employee
        self.bonus = 0

    def calculate_full_salary(self):
        self.bonus = self.calculate_bonus()
        return self.salary + self.bonus

    def calculate_bonus(self):
        if self.is_good_employee:
            return self.salary * (self.bonus_percentage / 100)
        return 0
```

***

**Пример 6 из Анти-паттерна [Неточное название функции](../../../ЦС/АНТИ-ПАТТЕРНЫ/Неточное название функции)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Исключение:**
```python
from django.contrib import admin

class ProductAdmin(admin.ModelAdmin):
    ...

    def response_add(self, request, obj, post_url_continue=None):
        # Дополнительная логика
        ...
        return super().response_add(request, obj, post_url_continue)

    def response_change(self, request, obj):
        # Дополнительная логика
        ...
        return super().response_change(request, obj)
```

***

**Пример  из Анти-паттерна [Неуказанные аргументы функции](../../../ЦС/АНТИ-ПАТТЕРНЫ/Неуказанные аргументы функции)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
import requests

from environs import Env


NASA_API_URL = ...


def download_nasa_photos(nasa_api_key):
    params = {
        'api_key': nasa_api_key,
    }
    response = requests.get(NASA_API_URL, params=params)
    ...


def main():
    env = Env()
    env.read_env()

    nasa_api_key = env.str('NASA_API_KEY')
    download_nasa_photos(nasa_api_key)


if __name__ == '__main__':
    main()
```
**Хорошо:**
```python
import requests

from environs import Env


def download_nasa_photos(nasa_api_key):
    nasa_api_url = ...
    params = {
        'api_key': nasa_api_key,
    }
    response = requests.get(nasa_api_url, params=params)
    ...


def main():
    env = Env()
    env.read_env()

    nasa_api_key = env.str('NASA_API_KEY')
    download_nasa_photos(nasa_api_key)


if __name__ == '__main__':
    main()
```
**Хорошо:**
```python
import requests

from environs import Env


def download_nasa_photos(nasa_api_key, nasa_api_url):
    params = {
        'api_key': nasa_api_key,
    }
    response = requests.get(nasa_api_url, params=params)
    ...


def main():
    env = Env()
    env.read_env()

    nasa_api_key = env.str('NASA_API_KEY')
    nasa_api_url = env.str('NASA_API_URL', ...)
    download_nasa_photos(nasa_api_key, nasa_api_url)


if __name__ == '__main__':
    main()
```

***

**Пример 1 из Анти-паттерна [Неуместное использование индексов](../../../ЦС/АНТИ-ПАТТЕРНЫ/Неуместное использование индексов)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
names = ['Alice', 'Bob', 'Charlie']

for num in range(len(names)):
    greeting = f'Привет, {names[num]}!'
    ...
```
**Хорошо:**
```python
names = ['Alice', 'Bob', 'Charlie']

for name in names:
    greeting = f'Привет, {name}!'
    ...
```

***

**Пример 2 из Анти-паттерна [Неуместное использование индексов](../../../ЦС/АНТИ-ПАТТЕРНЫ/Неуместное использование индексов)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
names = ['Alice', 'Bob', 'Charlie']

for num in range(len(names)):
    greeting = f'Привет, {names[num]}! Ты №{num + 1} в списке.'
    ...
```
**Хорошо:**
```python
names = ['Alice', 'Bob', 'Charlie']

for num, name in enumerate(names, start=1):
    greeting = f'Привет, {name}! Ты №{num} в списке.'
    ...
```

***

**Пример 3 из Анти-паттерна [Неуместное использование индексов](../../../ЦС/АНТИ-ПАТТЕРНЫ/Неуместное использование индексов)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
deal_name = 'Сделка_1'
parts = deal_name.split('_')
parts[-1] = str(int(parts[-1]) + 1)
new_deal_name = '_'.join(parts)
```
**Хорошо:**
```python
deal_name = 'Сделка_1'
*deal_name_parts, deal_serial_number = deal_name.split('_')
new_deal_serial_number = str(int(deal_serial_number) + 1)
new_deal_name = '_'.join([*deal_name_parts, new_deal_serial_number])
```

***

**Пример 4 из Анти-паттерна [Неуместное использование индексов](../../../ЦС/АНТИ-ПАТТЕРНЫ/Неуместное использование индексов)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
import os


def get_extension(link):
    extension_index = 1
    extension = os.path.splitext(link)[extension_index]
    return extension
```
**Плохо:**
```python
import os


def get_extension(link):
    extension_index = -1
    extension = os.path.splitext(link)[extension_index]
    return extension
```
**Плохо:**
```python
import os


def get_extension(link):
    extension = os.path.splitext(link)[1]
    return extension
```
**Плохо:**
```python
import os


def get_extension(link):
    extension = os.path.splitext(link)[-1]
    return extension
```
**Хорошо:**
```python
import os


def get_extension(link):
    _, extension = os.path.splitext(image_link)
    return extension
```

***

**Пример  из Анти-паттерна [Неэффективное использование памяти](../../../ЦС/АНТИ-ПАТТЕРНЫ/Неэффективное использование памяти)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
with open("large_file.txt", "r") as file:
    lines = file.readlines()
for line in lines:
    do_something(line)
```
**Хорошо:**
```python
with open("large_file.txt", "r") as file:
    for line in file:
        do_something(line)
```

***

**Пример 1 из Анти-паттерна [Обманчивое сокращение](../../../ЦС/АНТИ-ПАТТЕРНЫ/Обманчивое сокращение)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Хорошо:**
```python
temperature = ...
```

***

**Пример 2 из Анти-паттерна [Обманчивое сокращение](../../../ЦС/АНТИ-ПАТТЕРНЫ/Обманчивое сокращение)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
def create_client_rep(request, order_id):
    ...
    return response
```
**Хорошо:**
```python
def create_client_report(request, order_id):
    ...
    return response
```

***

**Пример 3 из Анти-паттерна [Обманчивое сокращение](../../../ЦС/АНТИ-ПАТТЕРНЫ/Обманчивое сокращение)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
class Product:
    def __init__(self, name, prc, qnt):
        self.name = name
        self.prc = prc
        self.qnt = qnt
```
**Хорошо:**
```python
class Product:
    def __init__(self, name, price, quantity):
        self.name = name
        self.price = price
        self.quantity = quantity
```

***

**Пример 4 из Анти-паттерна [Обманчивое сокращение](../../../ЦС/АНТИ-ПАТТЕРНЫ/Обманчивое сокращение)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
for vac in vacancies:
    ...
```
**Хорошо:**
```python
for vacancy in vacancies:
    ...
```

***

**Пример 5 из Анти-паттерна [Обманчивое сокращение](../../../ЦС/АНТИ-ПАТТЕРНЫ/Обманчивое сокращение)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
import requests as rq
```
**Хорошо:**
```python
import requests
```

***

**Пример 1 из Анти-паттерна [Общие названия](../../../ЦС/АНТИ-ПАТТЕРНЫ/Общие названия)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
capitals = {
   'Россия': 'Москва',
    ...
}

for key, value in capitals.items():
    ...
```
**Хорошо:**
```python
capitals = {
   'Россия': 'Москва',
    ...
}

for country, capital in capitals.items():
    ...
```

***

**Пример 2 из Анти-паттерна [Общие названия](../../../ЦС/АНТИ-ПАТТЕРНЫ/Общие названия)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
capitals = ['Москва', 'Лондон', 'Париж']

for i in capitals:
    ...
```
**Хорошо:**
```python
capitals = ['Москва', 'Лондон', 'Париж']

for capital in capitals:
    ...
```

***

**Пример 3 из Анти-паттерна [Общие названия](../../../ЦС/АНТИ-ПАТТЕРНЫ/Общие названия)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
import requests


def main():
    ...
    data = requests.get(url, params=params)
```
**Плохо:**
```python
import requests


def main():
    ...
    response_data = requests.get(url, params=params)
```
**Хорошо:**
```python
import requests


def main():
    ...
    response = requests.get(url, params=params)
```

***

**Пример  из Анти-паттерна [Обёртка над requests](../../../ЦС/АНТИ-ПАТТЕРНЫ/Обёртка над requests)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
import requests


def send_request(url):
    response = requests.get(url)
    response.raise_for_status()
    return response


def main():
    ...
    try:
        response = send_request(url)
    except:
        ...
```
**Хорошо:**
```python
import requests


def main():
    ...
    try:
        response = requests.get(url)
        response.raise_for_status()
    except:
        ...
```

***

**Пример 1 из Анти-паттерна [Опасные default настройки](../../../ЦС/АНТИ-ПАТТЕРНЫ/Опасные default настройки)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
from environs import Env


def main():
    env = Env()
    env.read_env()

    DEBUG = env.bool(DEBUG, True)
```
**Хорошо:**
```python
from environs import Env


def main():
    env = Env()
    env.read_env()

    DEBUG = env.bool(DEBUG, False)
```

***

**Пример 2 из Анти-паттерна [Опасные default настройки](../../../ЦС/АНТИ-ПАТТЕРНЫ/Опасные default настройки)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
from environs import Env


def main():
    env = Env()
    env.read_env()

    SECRET_KEY = env.str('SECRET_KEY', 'value_if_secret_key_is_empty')
```
**Хорошо:**
```python
from environs import Env


def main():
    env = Env()
    env.read_env()

    SECRET_KEY = env.str('SECRET_KEY')
```

***

**Пример  из Анти-паттерна [Опечатка](../../../ЦС/АНТИ-ПАТТЕРНЫ/Опечатка)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
def calculate_circle_area(radius):
    ...
    return circle_area

radius = ...
circle_area = calculate_circle_area(raddius)
```
**Хорошо:**
```python
def calculate_circle_area(radius):
    ...
    return circle_area

radius = ...
circle_area = calculate_circle_area(radius)
```

***

**Пример 1 из Анти-паттерна [Отладочный print](../../../ЦС/АНТИ-ПАТТЕРНЫ/Отладочный print)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
def do_something(value):
    print(value)
    ...
```
**Хорошо:**
```python
def do_something(value):
    ...
```

***

**Пример 2 из Анти-паттерна [Отладочный print](../../../ЦС/АНТИ-ПАТТЕРНЫ/Отладочный print)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
try:
    do_something()
except AnyException as err:
    print(err)
```
**Хорошо:**
```python
try:
    do_something()
except AnyException as err:
    logging.error(err)
```

***

**Пример  из Анти-паттерна [Отсутствие необходимого кэширования](../../../ЦС/АНТИ-ПАТТЕРНЫ/Отсутствие необходимого кэширования)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
def calculate_fibonacci(num):
    if num <= 1:
        return num
    return calculate_fibonacci(num - 1) + calculate_fibonacci(num - 2)


print(calculate_fibonacci(100))
```
**Хорошо:**
```python
import functools


@functools.lru_cache(maxsize=None)
def calculate_fibonacci(num):
    if num <= 1:
        return num
    return calculate_fibonacci(num - 1) + calculate_fibonacci(num - 2)


print(calculate_fibonacci(100))
```

***

**Пример  из Анти-паттерна [Отсутствие оптимизации запросов](../../../ЦС/АНТИ-ПАТТЕРНЫ/Отсутствие оптимизации запросов)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
authors = Author.objects.all()
for author in authors:
    books = author.books.all()
    print(f'Автором {author.name} написано книг: {books.count()} шт.')
```
**Хорошо:**
```python
authors = Author.objects.prefetch_related('books').all()
for author in authors:
    print(f'Автором {author.name} написано книг: {len(author.books.all())} шт.')
```

***

**Пример 1 из Анти-паттерна [Ошибочная форма числа](../../../ЦС/АНТИ-ПАТТЕРНЫ/Ошибочная форма числа)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
def download_image(images_urls, directory):
    for image_url in images_urls:
        ...
```
**Хорошо:**
```python
def download_images(images_urls, directory):
    for image_url in images_urls:
        ...
```

***

**Пример 2 из Анти-паттерна [Ошибочная форма числа](../../../ЦС/АНТИ-ПАТТЕРНЫ/Ошибочная форма числа)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
class Owner(models.Model):
    full_name = models.CharField(
        'ФИО владельца',
        max_length=200,
    )
    flats = models.ManyToManyField(
        'Flat',
        'Квартиры в собственности',
        related_name='owner',
    )
    ...
```
**Хорошо:**
```python
class Owner(models.Model):
    full_name = models.CharField(
        'ФИО владельца',
        max_length=200,
    )
    flats = models.ManyToManyField(
        'Flat',
        'Квартиры в собственности',
        related_name='owners',
    )
    ...
```

***

**Пример 3 из Анти-паттерна [Ошибочная форма числа](../../../ЦС/АНТИ-ПАТТЕРНЫ/Ошибочная форма числа)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
class Report(models.Model):
    order = models.ForeignKey(
        'Order',
        verbose_name='Заказ',
        on_delete=models.PROTECT,
        related_name='report',
    )
    ...
```
**Хорошо:**
```python
class Report(models.Model):
    order = models.ForeignKey(
        'Order',
        verbose_name='Заказ',
        on_delete=models.PROTECT,
        related_name='reports',
    )
    ...
```

***

**Пример  из Анти-паттерна [Плюсование строк](../../../ЦС/АНТИ-ПАТТЕРНЫ/Плюсование строк)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
name = 'Ivan'
result = 'Hello, ' + name + '! Welcome to the system.'
```
**Хорошо:**
```python
name = 'Ivan'
result = f'Hello, {name}! Welcome to the system.'
```

***

**Пример  из Анти-паттерна [Повторное декодирование JSON](../../../ЦС/АНТИ-ПАТТЕРНЫ/Повторное декодирование JSON)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
...
for vacancy in response.json()['items']:
    ...
pages = response.json()['pages']
...
```
**Хорошо:**
```python
...
payload = response.json()
for vacancy in payload['items']:
    ...
pages = payload['pages']
...
```

***

**Пример  из Анти-паттерна [Раздутый related_name](../../../ЦС/АНТИ-ПАТТЕРНЫ/Раздутый related_name)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
from django.db import models

class Owner(models.Model):
    ...
    flats = models.ManyToManyField(
        'Flat',
        verbose_name='Квартиры в собственности',
        related_name='flats_owners',
    )
    ...
```
**Хорошо:**
```python
from django.db import models

class Owner(models.Model):
    ...
    flats = models.ManyToManyField(
        'Flat',
        verbose_name='Квартиры в собственности',
        related_name='owners',
    )
    ...
```

***

**Пример  из Анти-паттерна [Разные кавычки](../../../ЦС/АНТИ-ПАТТЕРНЫ/Разные кавычки)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
name = 'Ivan'
result = f"Hello, {name}, welcome to the system!"
```
**Хорошо:**
```python
name = 'Ivan'
result = f'Hello, {name}, welcome to the system!'
```

***

**Пример 1 из Анти-паттерна [Ранний перехват исключений](../../../ЦС/АНТИ-ПАТТЕРНЫ/Ранний перехват исключений)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
def divide(num1, num2):
    result = None
    try:
        result = num1 / num2
    except ZeroDivisionError as e:
        logging.error(f'ZeroDivisionError: {e}')
    finally:
        return result


def main():
    num1 = 1
    num2 = 0
    result = divide(num1, num2)
    print(result)
```
**Хорошо:**
```python
def divide(num1, num2):
    result = num1 / num2
    return result


def main():
    num1 = ...
    num2 = ...
    try:
        result = divide(num1, num2)
    except ZeroDivisionError as e:
        logging.error(f'ZeroDivisionError: {e}')
    finally:
        print result
```

***

**Пример 2 из Анти-паттерна [Ранний перехват исключений](../../../ЦС/АНТИ-ПАТТЕРНЫ/Ранний перехват исключений)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
class EmptyLessonError(Exception):
    pass


def validate_lesson(raw_lesson):
    try:
        if raw_lesson == '':
            raise EmptyLessonError('Урок не содержит материалов!')
        ...
    except EmptyLessonError as e:
        logging.warning(f'EmptyLessonError: {e}')
    except ...
    ...


def main():
    raw_lesson = ...
    lesson = validate_lesson(raw_lesson)
    ...
```
**Хорошо:**
```python
class EmptyLessonError(Exception):
    pass


def validate_lesson(raw_lesson):
    if raw_lesson == '':
        raise EmptyLessonError('Урок не содержит материалов!')
    ...


def main():
    raw_lesson = ...
    try:
        lesson = validate_lesson(raw_lesson)
    except EmptyLessonError as e:
        logging.warning(f'EmptyLessonError: {e}')
    except ...
```

***

**Пример  из Анти-паттерна [Сложная логика в lambda](../../../ЦС/АНТИ-ПАТТЕРНЫ/Сложная логика в lambda)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
do_something = lambda num: num**2 + 2*num - 1 if num > 0 else num**2 - 2*num + 1
```
**Хорошо:**
```python
def do_something(num):
    if num > 0:
        return num**2 + 2*num - 1
    else:
        return num**2 - 2*num + 1
```
**Хорошо:**
```python
def do_something(num):
    return num**2 + 2*num - 1 if num > 0 else num**2 - 2*num + 1
```

***

**Пример 1 из Анти-паттерна [Сложные выражения](../../../ЦС/АНТИ-ПАТТЕРНЫ/Сложные выражения)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
for number, link in enumerate(response.json()['links']['flickr']['original'], start=1):
    ...
```
**Хорошо:**
```python
image_links = response.json()['links']['flickr']['original']
for number, link in enumerate(image_links, start=1):
    ...
```

***

**Пример 2 из Анти-паттерна [Сложные выражения](../../../ЦС/АНТИ-ПАТТЕРНЫ/Сложные выражения)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
import os
import urllib


def get_extension(url):
    image_link_index = 2
    extension_index = 1
    extension = os.path.splitext((urllib.parse.urlsplit(url)[image_link_index]))[extension_index]
    return extension
```
**Хорошо:**
```python
import os
import urllib


def get_extension(url):
    image_link_index = 2
    extension_index = 1
    image_link = urllib.parse.urlsplit(url)[image_link_index]
    extension = os.path.splitext(image_link)[extension_index]
    return extension
```
**Хорошо:**
```python
import os
import urllib


def get_extension(url):
    image_link_index = 2
    extension_index = 1
    image_link = urllib.parse.urlsplit(url)[image_link_index]
    return os.path.splitext(image_link)[extension_index]
```
**Хорошо:**
```python
import os
import urllib


def get_extension(url):
    image_link_index = 2
    image_link = urllib.parse.urlsplit(url)[image_link_index]
    _, extension = os.path.splitext(image_link)
    return extension
```

***

**Пример  из Анти-паттерна [Сложный list comprehension](../../../ЦС/АНТИ-ПАТТЕРНЫ/Сложный list comprehension)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
numbers = [1, 2, 3, 4, 5]

result = [(num * 2, num ** 2) for num in numbers if (num % 2 == 0) and (logger.info(f"Processing {num}") or True)]
```
**Хорошо:**
```python
numbers = [1, 2, 3, 4, 5]
result = []

for num in numbers:
    if num % 2 == 0:
        logger.info(f"Processing {num}")
        doubled_num = num * 2
        squared_num = num ** 2
        result.append((doubled_num, squared_num))
```

***

**Пример  из Анти-паттерна [Сравнение с True и False](../../../ЦС/АНТИ-ПАТТЕРНЫ/Сравнение с True и False)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
is_active = True
...

if is_active == True:
    do_something()
```
**Хорошо:**
```python
is_active = True

if is_active:
    do_something()
```
**Плохо:**
```python
is_active = False
...

if is_active == False:
    do_something()
```
**Хорошо:**
```python
is_active = False

if not is_active:
    do_something()
```

***

**Пример 1 из Анти-паттерна [Тип в названии](../../../ЦС/АНТИ-ПАТТЕРНЫ/Тип в названии)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
days_list = ['Понедельник', 'Вторник', ...]
```
**Хорошо:**
```python
week_days = ['Понедельник', 'Вторник', ...]
```

***

**Пример 2 из Анти-паттерна [Тип в названии](../../../ЦС/АНТИ-ПАТТЕРНЫ/Тип в названии)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
def extract_and_format_emails(emails):
    if emails:
        email_list = [email.value for email in emails]
```
**Хорошо:**
```python
def extract_and_format_emails(emails_payload):
    if emails_payload:
        emails = [email.value for email in emails_payload]
```

***

**Пример  из Анти-паттерна [Хардкодинг путей](../../../ЦС/АНТИ-ПАТТЕРНЫ/Хардкодинг путей)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
import os


def get_lesson(filename):
    filepath = os.path.join('path/to/lessons_files', filename)
    with open(filepath, 'r') as file:
        raw_lesson = file.read()
    ...
    return lesson


def main():
    filename = ...
    lesson = get_lesson(filename)
```
**Хорошо:**
```python
import os

from environs import Env


def get_lesson(filepath):
    with open(filepath, 'r') as file:
        raw_lesson = file.read()
    ...
    return lesson


def main():
    env = Env()
    env.read_env()

    lessons_folder_path = env.str('LESSONS_FOLDER_PATH', 'path/to/lessons_files')
    filenames = ...
    for filename in filenames:
        filepath = os.path.join(lessons_folder_path, filename)
        lesson = get_lesson(filepath)
```

***

**Пример  из Анти-паттерна [Число в названии](../../../ЦС/АНТИ-ПАТТЕРНЫ/Число в названии)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
five_dogs = 5
```
**Хорошо:**
```python
dogs_num = ...
```

***

**Пример  из Анти-паттерна [Чтение ненадёжных данных](../../../ЦС/АНТИ-ПАТТЕРНЫ/Чтение ненадёжных данных)**

**Как обнаружить повреждение Акцептора:** ожидается в будущей версии ЦС.

**Плохо:**
```python
filepath = ...
with open(filepath, 'r') as file:
    payload = file.read()
validate_payload(payload)
    ...
```
**Хорошо:**
```python
try:
    filepath = ...
    with open(filepath, 'r') as file:
        payload = file.read()
    validate_payload(payload)
except FileNotFoundError as e:
    logging.error(f'File not found error: {e}')
except ValidationError as e:
    logging.error(f'Validation error: {e}')
```
